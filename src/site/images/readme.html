<!DOCTYPE html>  
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>readme</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style id="mkstylesheet">
/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:bold}dfn{font-style:italic}h1{font-size:2em;margin:0.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace, monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{height:auto}input[type="search"]{-webkit-appearance:textfield;box-sizing:content-box}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid #c0c0c0;margin:0 2px;padding:0.35em 0.625em 0.75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:bold}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}*{box-sizing:border-box}input,select,textarea,button{font:13px/1.4 Helvetica,arial,nimbussansl,liberationsans,freesans,clean,sans-serif,"Segoe UI Emoji","Segoe UI Symbol"}body{font:13px/1.4 Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";color:#333;background-color:#fff}a{color:#4078c0;text-decoration:none}a:hover,a:active{text-decoration:underline}hr,.rule{height:0;margin:15px 0;overflow:hidden;background:transparent;border:0;border-bottom:1px solid #ddd}hr:before,.rule:before{display:table;content:""}hr:after,.rule:after{display:table;clear:both;content:""}h1,h2,h3,h4,h5,h6{margin-top:15px;margin-bottom:15px;line-height:1.1}h1{font-size:30px}h2{font-size:21px}h3{font-size:16px}h4{font-size:14px}h5{font-size:12px}h6{font-size:11px}small{font-size:90%}blockquote{margin:0}ul,ol{padding:0;margin-top:0;margin-bottom:0}ol ol,ul ol{list-style-type:lower-roman}ul ul ol,ul ol ol,ol ul ol,ol ol ol{list-style-type:lower-alpha}dd{margin-left:0}tt,code{font-family:Consolas, "Liberation Mono", Menlo, Courier, monospace;font-size:12px}pre{margin-top:0;margin-bottom:0;font:12px Consolas,"Liberation Mono",Menlo,Courier,monospace}html,body{color:black}#wrapper{font:16px helvetica,arial,freesans,clean,sans-serif;-webkit-font-smoothing:antialiased;line-height:1.6;padding:3px;background:#fff;border-radius:3px;-moz-border-radius:3px;-webkit-border-radius:3px;border:solid 1px #dddddd !important;color:#333}p{margin:1em 0}a{color:#4183c4;text-decoration:none}#wrapper{background-color:#fff;padding:30px;margin:15px;font-size:16px;line-height:1.6}#wrapper>*:first-child{margin-top:0 !important}#wrapper>*:last-child{margin-bottom:0 !important}@media screen{#wrapper{border:solid 1px #ddd}}h1,h2,h3,h4,h5,h6{position:relative;margin-top:1em;margin-bottom:16px;font-weight:700;line-height:1.4;color:#333}h1{padding-bottom:.3em;font-size:2.25em;line-height:1.2;border-bottom:1px solid #eee}h2{padding-bottom:0.3em;font-size:1.75em;line-height:1.225;border-bottom:1px solid #eee}h3{font-size:1.5em;line-height:1.43}h4{font-size:1.25em}h5{font-size:1em}h6{color:#777;font-size:1em}p,blockquote,ul,ol,dl,table,pre{margin-top:0;margin-bottom:16px}hr{height:4px;padding:0;margin:16px 0;background-color:#e7e7e7;border:0 none}ul,ol{padding-left:2em}ul.no-list,ol.no-list{padding:0;list-style-type:none}ul ul,ul ol{margin-top:0;margin-bottom:0}ol ol,ol ul{margin-top:0;margin-bottom:0}li>p{margin-top:16px}dl{padding:0}dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}dl dd{padding:0 16px;margin-bottom:16px}blockquote{padding:0 15px;margin-left:0;color:#777;border-left:4px solid #ddd}blockquote>:first-child{margin-top:0}blockquote>:last-child{margin-bottom:0}table{display:block;width:100%;overflow:auto}table th{font-weight:700;padding:6px 13px;border:1px solid #ddd}table td{padding:6px 13px;border:1px solid #ddd}table tr{background-color:#fff;border-top:1px solid #ccc}table tr:nth-child(2n){background-color:#f8f8f8}img{max-width:100%;-moz-box-sizing:border-box;box-sizing:border-box}span.frame{display:block;overflow:hidden}span.frame>span{display:block;float:left;width:auto;padding:7px;margin:13px 0 0;overflow:hidden;border:1px solid #ddd}span.frame span img{display:block;float:left}span.frame span span{display:block;padding:5px 0 0;clear:both;color:#333}span.align-center{display:block;overflow:hidden;clear:both}span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}span.align-center span img{margin:0 auto;text-align:center}span.align-right{display:block;overflow:hidden;clear:both}span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}span.align-right span img{margin:0;text-align:right}span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}span.float-left span{margin:13px 0 0}span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}code,tt{padding:0;padding-top:.2em;padding-bottom:.2em;margin:0;font-size:85%;background-color:rgba(0,0,0,0.04);border-radius:3px}code:before,code:after{letter-spacing:-.2em;content:"\00a0"}tt:before,tt:after{letter-spacing:-.2em;content:"\00a0"}code br,tt br{display:none}del code{text-decoration:inherit;vertical-align:text-top}pre>code{padding:0;margin:0;font-size:100%;white-space:pre;background:transparent;border:0}.highlight{margin-bottom:16px}.highlight pre{padding:16px;margin-bottom:0;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}pre{padding:16px;margin-bottom:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px;word-wrap:normal}pre code,pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}pre code:before,pre code:after{content:normal}pre tt:before,pre tt:after{content:normal}.poetry pre{font-family:Georgia, Garamond, serif !important;font-style:italic;font-size:110% !important;line-height:1.6em;display:block;margin-left:1em}.poetry pre code{font-family:Georgia, Garamond, serif !important;word-break:break-all;word-break:break-word;-webkit-hyphens:auto;-moz-hyphens:auto;hyphens:auto;white-space:pre-wrap}sup,sub,a.footnote{font-size:1.4ex;height:0;line-height:1;vertical-align:super;position:relative}sub{vertical-align:sub;top:-1px}@media print{body{background:#fff}img,table,figure{page-break-inside:avoid}#wrapper{background:#fff;border:none !important;font-size:12px}pre code{overflow:visible}}@media screen{body.inverted{color:#eee !important;border-color:#555;box-shadow:none}.inverted #wrapper,.inverted hr,.inverted p,.inverted td,.inverted li,.inverted h1,.inverted h2,.inverted h3,.inverted h4,.inverted h5,.inverted h6,.inverted th,.inverted .math,.inverted caption,.inverted dd,.inverted dt,.inverted blockquote{color:#eee !important;border-color:#555;box-shadow:none}.inverted td,.inverted th{background:#333}.inverted pre,.inverted code,.inverted tt{background:#eeeeee !important;color:#111}.inverted h2{border-color:#555555}.inverted hr{border-color:#777;border-width:1px !important}::selection{background:rgba(157,193,200,0.5)}h1::selection{background-color:rgba(45,156,208,0.3)}h2::selection{background-color:rgba(90,182,224,0.3)}h3::selection,h4::selection,h5::selection,h6::selection,li::selection,ol::selection{background-color:rgba(133,201,232,0.3)}code::selection{background-color:rgba(0,0,0,0.7);color:#eeeeee}code span::selection{background-color:rgba(0,0,0,0.7) !important;color:#eeeeee !important}a::selection{background-color:rgba(255,230,102,0.2)}.inverted a::selection{background-color:rgba(255,230,102,0.6)}td::selection,th::selection,caption::selection{background-color:rgba(180,237,95,0.5)}.inverted{background:#0b2531;background:#252a2a}.inverted #wrapper{background:#252a2a}.inverted a{color:#acd1d5}}.highlight{background:#fff}.highlight .c{color:#998;font-style:italic}.highlight .err{color:#a61717;background-color:#e3d2d2}.highlight .k,.highlight .o{font-weight:700}.highlight .cm{color:#998;font-style:italic}.highlight .cp{color:#999;font-weight:700}.highlight .c1{color:#998;font-style:italic}.highlight .cs{color:#999;font-weight:700;font-style:italic}.highlight .gd{color:#000;background-color:#fdd}.highlight .gd .x{color:#000;background-color:#faa}.highlight .ge{font-style:italic}.highlight .gr{color:#a00}.highlight .gh{color:#999}.highlight .gi{color:#000;background-color:#dfd}.highlight .gi .x{color:#000;background-color:#afa}.highlight .go{color:#888}.highlight .gp{color:#555}.highlight .gs{font-weight:700}.highlight .gu{color:purple;font-weight:700}.highlight .gt{color:#a00}.highlight .kc,.highlight .kd,.highlight .kn,.highlight .kp,.highlight .kr{font-weight:700}.highlight .kt{color:#458;font-weight:700}.highlight .m{color:#099}.highlight .s{color:#d14}.highlight .n{color:#333}.highlight .na{color:teal}.highlight .nb{color:#0086b3}.highlight .nc{color:#458;font-weight:700}.highlight .no{color:teal}.highlight .ni{color:purple}.highlight .ne,.highlight .nf{color:#900;font-weight:700}.highlight .nn{color:#555}.highlight .nt{color:navy}.highlight .nv{color:teal}.highlight .ow{font-weight:700}.highlight .w{color:#bbb}.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:#099}.highlight .sb,.highlight .sc,.highlight .sd,.highlight .s2,.highlight .se,.highlight .sh,.highlight .si,.highlight .sx{color:#d14}.highlight .sr{color:#009926}.highlight .s1{color:#d14}.highlight .ss{color:#990073}.highlight .bp{color:#999}.highlight .vc,.highlight .vg,.highlight .vi{color:teal}.highlight .il{color:#099}.highlight .gc{color:#999;background-color:#EAF2F5}.type-csharp .highlight .k,.type-csharp .highlight .kt{color:blue}.type-csharp .highlight .nf{color:#000;font-weight:400}.type-csharp .highlight .nc{color:#2b91af}.type-csharp .highlight .nn{color:#000}.type-csharp .highlight .s,.type-csharp .highlight .sc{color:#a31515}.type-csharp .highlight .k,.type-csharp .highlight .kt{color:#00F}.type-csharp .highlight .nf{color:#000;font-weight:normal}.type-csharp .highlight .nc{color:#2B91AF}.type-csharp .highlight .nn{color:#000}.type-csharp .highlight .s,.type-csharp .highlight .sc{color:#A31515}body.dark #wrapper{background:transparent !important;box-shadow:none !important}
#mkreplaced-toc{list-style-position:inside;padding:0;margin:0 0 0 1rem;list-style-type:none}#mkreplaced-toc li::before{content:''}#mkreplaced-toc li{font-size:1.5rem;line-height:1.5;font-weight:normal}#mkreplaced-toc li ul{font-size:1.3rem;font-weight:300;padding:.5rem 0;margin:0 0 0 1rem}#mkreplaced-toc li.missing{list-style-type:none !important}#mkreplaced-toc.max-1 ul,#mkreplaced-toc.max1 ul{display:none}#mkreplaced-toc.max-2 ul ul,#mkreplaced-toc.max2 ul ul{display:none}#mkreplaced-toc.max-3 ul ul ul,#mkreplaced-toc.max3 ul ul ul{display:none}#mkreplaced-toc.max-4 ul ul ul ul,#mkreplaced-toc.max4 ul ul ul ul{display:none}#mkreplaced-toc.max-5 ul ul ul ul ul,#mkreplaced-toc.max5 ul ul ul ul ul{display:none}
#wrapper #generated-toc-clone, #wrapper #mkreplaced-toc, #wrapper #generated-toc-clone ul, #wrapper #mkreplaced-toc ul {
    list-style-position: inside;
}
#wrapper #generated-toc-clone li.missing, #wrapper #mkreplaced-toc li.missing {
    list-style-type: none!important;
}
#wrapper #generated-toc-clone, #wrapper #mkreplaced-toc {
    list-style-type: upper-roman;
}
#wrapper #generated-toc-clone>li>ul, #wrapper #mkreplaced-toc>li>ul  {
    list-style-type: decimal;
}
#wrapper #generated-toc-clone>li>ul>li>ul, #wrapper #mkreplaced-toc>li>ul>li>ul {
    list-style-type: decimal-leading-zero;
}
#wrapper #generated-toc-clone>li>ul>li>ul>li>ul, #wrapper #mkreplaced-toc>li>ul>li>ul>li>ul {
    list-style-type: lower-greek;
}
#wrapper #generated-toc-clone>li>ul>li>ul>li>ul>li>ul, #wrapper #mkreplaced-toc>li>ul>li>ul>li>ul>li>ul {
    list-style-type: disc;
}
#wrapper #generated-toc-clone>li>ul>li>ul>li>ul>li>ul>li>ul, #wrapper #mkreplaced-toc>li>ul>li>ul>li>ul>li>ul>li>ul {
    list-style-type: square;
}
#wrapper #generated-toc-clone,#wrapper #mkreplaced-toc{list-style-position:outside!important;margin-left:2rem;}
</style>

<style id="mkprintstyles">@media print{#wrapper #generated-toc-clone,#generated-toc{display:none!important;}
html,body,#wrapper{font-size:9pt!important;}
}
</style>


</head>
<body class="normal">
  <div id="wrapper">
      <h1 id="L1.-introduction">1. Introduction</h1>

<p>This is a Gatling-based functional &amp; performance test environment for the George API project.</p>

<h1 id="L2.-software-requirements">2. Software Requirements</h1>

<p>You need to have the following software installed</p>

<ul>
<li>JDK 1.8</li>
<li>Apache Ant 1.9 or better</li>
</ul>


<p>To make sure that the systm works run the following commands</p>

<pre><code class="(null)">george-gatling&gt; java -version
java version &quot;1.8.0_45&quot;
Java(TM) SE Runtime Environment (build 1.8.0_45-b14)
Java HotSpot(TM) 64-Bit Server VM (build 25.45-b02, mixed mode)</code></pre>




<pre><code class="(null)">george-gatling&gt; ant -v
Apache Ant(TM) version 1.9.4 compiled on April 29 2014</code></pre>




<pre><code class="(null)">george-gatling&gt; ant info
Buildfile: /Volumes/data/work/beeone/george/george-gatling/build.xml

info:
     [echo] ANT_HOME                          = /usr/local/Cellar/ant/1.9.4/libexec
     [echo] JAVA_HOME                         = /Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/
     [echo] ----------------------------------------------------------------------
     [echo] OS Name                           = Mac OS X
     [echo] OS Architecture                   = x86_64
     [echo] OS Version                        = 10.10.5
     [echo] ----------------------------------------------------------------------
     [echo] gatling.home                      = /Users/sgoeschl/work/beeone/george/george-gatling
     [echo] gatling.conf                      = /Users/sgoeschl/work/beeone/george/george-gatling/conf
     [echo] gatling.work.dir                  = /Users/sgoeschl/work/beeone/george/george-gatling/target/work/george/at/fat/functional
     [echo] gatling.response.current.dir      = /Users/sgoeschl/work/beeone/george/george-gatling/target/work/george/at/fat/functional/responses
     [echo] gatling.response.expected.dir     = /Users/sgoeschl/work/beeone/george/george-gatling/user-files/expected/george/at/fat/functional
     [echo] ----------------------------------------------------------------------
     [echo] simulation                        = at.beeone.george.test.gatling.simulation.george.at.functional.Test
     [echo] id                                = george-at-fat-functional

BUILD SUCCESSFUL</code></pre>




<pre><code class="(null)">george-gatling&gt; ant -p
Buildfile: /Volumes/data/work/beeone/george/george-gatling/build.xml

Main targets:

 clean        Clean the working directory for the current test
 clean:all    Clean the working directory for all tests
 diff         Compare expected with current responses
 diff:visual  Compare expected with current responses
 info         Print the current configuration
 record       Run the functional test and capture expected JSON responses
 reset        Remove expected JSON responses for the current test
 reset:all    Remove expected JSON responses for all tests
 save         Save the current JSON output as new expected JSON responses
 test         Run the functional test
 verify       Run the tests and and compare with expected responses
Default target: info
</code></pre>


<h1 id="L3.-configuration">3. Configuration</h1>

<h2 id="L3.1-target-environment">3.1 Target Environment</h2>

<p>The implementation allows to test various George API installations, e.g.</p>

<ul>
<li>The AT DEV server</li>
<li>the CZ FAT server</li>
</ul>


<p>The following Ant properties are defined to configure the target execution</p>

<table>
<thead>
<tr>
<th> Property      </th>
<th style="text-align:left;"> Values                                 </th>
</tr>
</thead>
<tbody>
<tr>
<td> application   </td>
<td style="text-align:left;"> webapi, georgeapi, george              </td>
</tr>
<tr>
<td> tenant        </td>
<td style="text-align:left;"> at, cz                                 </td>
</tr>
<tr>
<td> site          </td>
<td style="text-align:left;"> local, custom, dev, fat                </td>
</tr>
<tr>
<td> scope         </td>
<td style="text-align:left;"> functional, performance, custom        </td>
</tr>
</tbody>
</table>


<p>The target configuration can be passed on the command line</p>

<blockquote><p>ant -Dapplication=george -Dtenant=at -Dsite=fat1 clean info test<br/>
ant -Dapplication=george -Dtenant=cz -Dsite=fat clean info test<br/>
ant -Dapplication=george -Dtenant=cz -Dsite=fat clean info record<br/>
ant -Dapplication=georgeapi -Dtenant=cz -Dsite=fat -Dscope=performance clean info test</p></blockquote>

<h2 id="L3.2.-test-execution">3.2. Test Execution</h2>

<p>The implementation allows different usage scenarios</p>

<ul>
<li>Testing the George API</li>
<li>Testing the George API and recording the expected responses</li>
<li>Testing the George API and comparing the current with the expected responses</li>
<li>Performance testing</li>
</ul>


<h1 id="L4.-some-examples">4. Some Examples</h1>

<h2 id="L4.1-hitting-the-george-api">4.1 Hitting The George API</h2>

<p>We just want to crawl the George API using the default configuration (George AT FAT)</p>

<pre><code class="(null)">ant clean info test

george-gatling&gt;
george-gatling&gt; ant -Dapplication=george -Dtenant=at -Dsite=fat clean info test

Buildfile: /Volumes/data/work/beeone/george/george-gatling/build.xml

clean:
   [delete] Deleting directory /Volumes/data/work/beeone/george/george-gatling/target/work/george/at/fat1

info:
     [echo] ANT_HOME                          = /Applications/Java/apache-ant-1.8.2
     [echo] JAVA_HOME                         = /Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home
     [echo] ----------------------------------------------------------------------
     [echo] OS Name                           = Mac OS X
     [echo] OS Architecture                   = x86_64
     [echo] OS Version                        = 10.10.3
     [echo] ----------------------------------------------------------------------
     [echo] gatling.home                      = /Volumes/data/work/beeone/george/george-gatling
     [echo] gatling.conf                      = /Volumes/data/work/beeone/george/george-gatling/conf
     [echo] gatling.work.dir                  = /Volumes/data/work/beeone/george/george-gatling/target/work/george/at/fat1
     [echo] gatling.response.current.dir      = /Volumes/data/work/beeone/george/george-gatling/target/work/george/at/fat1/responses
     [echo] gatling.response.expected.dir     = /Volumes/data/work/beeone/george/george-gatling/user-files/expected/george/at/fat1
     [echo] ----------------------------------------------------------------------
     [echo] id                                = george-at-fat-functional
     [echo] lenient

     [exec] ================================================================================
     [exec] 2015-07-30 10:12:12                                         264s elapsed
     [exec] ---- Users ---------------------------------------------------------------------
     [exec] [##########################################################################]100%
     [exec]           waiting: 0      / active: 0      / done:1
     [exec] ---- Requests ------------------------------------------------------------------
     [exec] &gt; Global                                                   (OK=969    KO=0     )
     [exec] &gt; Token Generator                                          (OK=6      KO=0     )
     [exec] &gt; my/configuration                                         (OK=6      KO=0     )
     [exec] &gt; my/pfm                                                   (OK=6      KO=0     )
     [exec] &gt; my/accounts                                              (OK=6      KO=0     )
     [exec] &gt; my/accounts/*/stats                                      (OK=276    KO=0     )
     [exec] &gt; my/transactions/*                                        (OK=296    KO=0     )
     [exec] &gt; my/preferences                                           (OK=6      KO=0     )
     [exec] &gt; my/categorization                                        (OK=6      KO=0     )
     [exec] &gt; my/accounts/*/image                                      (OK=54     KO=0     )
     [exec] &gt; my/state                                                 (OK=6      KO=0     )
     [exec] &gt; my/transactions/marked/*                                 (OK=296    KO=0     )
     [exec] &gt; my/images/user-image                                     (OK=5      KO=0     )
     [exec] ================================================================================
     [exec]
     [exec] Simulation finished
     [exec] Parsing log file(s)...
     [exec] Parsing log file(s) done
     [exec] Generating reports...
     [exec]
     [exec] ================================================================================
     [exec] ---- Global Information --------------------------------------------------------
     [exec] &gt; request count                                        969 (OK=969    KO=0     )
     [exec] &gt; min response time                                     18 (OK=18     KO=-     )
     [exec] &gt; max response time                                  20084 (OK=20084  KO=-     )
     [exec] &gt; mean response time                                   270 (OK=270    KO=-     )
     [exec] &gt; std deviation                                       1301 (OK=1301   KO=-     )
     [exec] &gt; response time 50th percentile                        130 (OK=129    KO=-     )
     [exec] &gt; response time 75th percentile                        169 (OK=169    KO=-     )
     [exec] &gt; mean requests/sec                                  3.665 (OK=3.665  KO=-     )
     [exec] ---- Response Time Distribution ------------------------------------------------
     [exec] &gt; t &lt; 800 ms                                           947 ( 98%)
     [exec] &gt; 800 ms &lt; t &lt; 1200 ms                                   5 (  1%)
     [exec] &gt; t &gt; 1200 ms                                           17 (  2%)
     [exec] &gt; failed                                                 0 (  0%)
     [exec] ================================================================================
     [exec]
     [exec] Reports generated in 0s.
     [exec] Please open the following file: /Volumes/data/work/beeone/george/george-gatling/target/work/george/at/fat1/results-1438243668182/index.html
     [exec] Global: percentage of failed requests is 0 : true

gatling:execute-windows:

BUILD SUCCESSFUL
Total time: 4 minutes 28 seconds</code></pre>


<h2 id="L4.2-testing-cz-fat">4.2 Testing CZ FAT</h2>

<p>We want to exercise the CZ FAT installation to see if we get no errors</p>

<pre><code class="(null)">&gt; ant -Dapplication=george -Dtenant=at -Dsite=fat clean info test</code></pre>


<h2 id="L4.2-recording--amp--verifiy-json-responses-of-cz-fat">4.2 Recording &amp; Verifiy JSON Responses of CZ FAT</h2>

<p>We want to record the JSON responses for CZ FAT and compare the current with the expected responses in subsequent runs. A perfect opportunity to do that would be recording the expected responses before a release and re-run the test afterwards.</p>

<pre><code class="(null)">&gt; ant -Dapplication=george -Dtenant=cz -Dsite=fat clean info record
&gt; ant -Dapplication=george -Dtenant=cz -Dsite=fat clean info verify</code></pre>


<h1 id="L5.-setting-up-gatling-development">5. Setting Up Gatling Development</h1>

<h2 id="L5.1-setup-intellij">5.1 Setup IntelliJ</h2>

<p>Having IntelliJ to write and debug test scripts would be really handy</p>

<ul>
<li>Open the &ldquo;george-gatling&rdquo; folder in IntelliJ</li>
<li>Under &ldquo;Projetc Settibngs/Modules&rdquo; set &ldquo;user-files/simulations&rdquo; as &ldquo;Tests&rdquo; since it contains the Scala scripts we would like to run</li>
<li>Under &ldquo;Libraries&rdquo; add a Java-based project library containing all the libraries of &ldquo;lib&rdquo; excluding

<ul>
<li> scala-compiler.jar</li>
<li> scala-library.jar</li>
<li> scala-parser-combinators.jar</li>
<li> scala-reflect.jar</li>
<li> scala-swing.jar</li>
<li> scala-xml.jar</li>
</ul>
</li>
<li>Use JDK 1.8</li>
<li>Use the &ldquo;Global Library&rdquo; scala-sdk-2.11.7</li>
</ul>


<h2 id="L5.2-creating-run-debug-configuration">5.2 Creating Run/Debug Configuration</h2>

<p>Having IntelliJ&rsquo;s Scala support is nice but really cool would be debugging support - you need to create a &ldquo;Run/Debug&rdquo; configuration</p>

<table>
<thead>
<tr>
<th> Parameter                 </th>
<th style="text-align:left;"> Value                                                                                                           </th>
</tr>
</thead>
<tbody>
<tr>
<td> Main Class                </td>
<td style="text-align:left;"> io.gatling.app.Gatling                                                                                          </td>
</tr>
<tr>
<td> VM options                </td>
<td style="text-align:left;"> -Djava.net.preferIPv4Stack=true -Djava.net.preferIPv6Addresses=false -Dtenant=at -Dsite=dev                     </td>
</tr>
<tr>
<td> Program arguments         </td>
<td style="text-align:left;"> &ndash;simulation at.beeone.george.test.gatling.simulation.george.at.functional.Test &ndash;no-reports                    </td>
</tr>
<tr>
<td> Working directory         </td>
<td style="text-align:left;"> /Users/sgoeschl/work/playground/gatling/test                                                                    </td>
</tr>
</tbody>
</table>


<p>Please note that we hard-wired the Gatling installation with IntelliJ</p>

<ul>
<li>IntelliJ compiles into the Gatlin &ldquo;target&rdquo; folder</li>
</ul>


<h1 id="L6.-implementation-details">6. Implementation Details</h1>

<h2 id="L6.1-configuration-items">6.1 Configuration Items</h2>

<p>The idea is to ship the Gatling tests with all required configuration parameters - at the end of the day you want to run tests and not configure them on command line or in a configuration file.</p>

<p>The configuration items are found in <strong>./user-files/conf/${tenant}/${site}/${scope}</strong> and contain</p>

<ul>
<li>environment.properties</li>
<li>user.csv</li>
</ul>


<p>An example for <em>environment.properties</em> for CZ FAT</p>

<pre><code class="(null)">george.api.url=https://www.csast.csas.cz/webapi/api/v2/gapi
george.tokengenerator.url=
presto.api.url=https://george.csast.csas.cz/api/webapi/v3
presto.api.key=dd3c4d08-6c39-411a-a37d-0fbea365fc1e</code></pre>


<p>An example for <em>user.properties</em> for CZ FAT</p>

<pre><code class="(null)">user,password,token,name,description
9428453637,aa123456,3/georgeXXXgeneratedXXX01x12x2018oooooooooooooooXXX001XXX1106204,Břetislav Pánek,Web API V3 Long Term Token
9423452135,aa123456,3/georgeXXXgeneratedXXX01x12x2018oooooooooooooooXXX001XXX1105808,Karel Patočka,Web API V3 Long Term Token
9422753404,aa123456,3/georgeXXXgeneratedXXX01x12x2018oooooooooooooooXXX001XXX1104675,Franti&scaron;ek Buk,Web API V3 Long Term Token
9428453406,aa123456,3/georgeXXXgeneratedXXX01x12x2018oooooooooooooooXXX001XXX1106138,Ladislav Joukl,Web API V3 Long Term Token
9423952239,aa123456,3/georgeXXXgeneratedXXX01x12x2018oooooooooooooooXXX001XXX1106182,Karel Vitou&scaron;,Web API V3 Long Term Token
9323250649,aa123456,3/georgeXXXgeneratedXXX01x12x2018oooooooooooooooXXX001XXX1106226,Stanislav Starý,Web API V3 Long Term Token
9325656866,aa123456,3/georgeXXXgeneratedXXX01x12x2018oooooooooooooooXXX001XXX1104730,Eva &Scaron;mídová,Web API V3 Long Term Token
9428453439,aa123456,3/georgeXXXgeneratedXXX01x12x2018oooooooooooooooXXX001XXX1106281,Ladislav Kuděj,Web API V3 Long Term Token
9322951977,aa123456,3/georgeXXXgeneratedXXX01x12x2018oooooooooooooooXXX001XXX1104510,Petr Hájek,Web API V3 Long Term Token</code></pre>


<h2 id="L6.2-hierarchical-configuration">6.2 Hierarchical Configuration</h2>

<p>The <em>environment.properties</em> are resolved hierarchically using the following order (the last value wins)</p>

<ul>
<li>./user-files/conf/environment.properties</li>
<li>./user-files/conf/$tenant/environment.properties</li>
<li>./user-files/conf/$tenant/$site/environment.properties</li>
<li>./user-files/conf/$tenant/$site/$application/environment.properties</li>
<li>./user-files/conf/$tenant/$site/$application/${scope}/environment.properties</li>
</ul>


<p>The <em>user.csv</em> is searched for and loaded in the following order</p>

<ul>
<li>./user-files/conf/$tenant/$site/$application/${scope}/user.csv</li>
<li>./user-files/conf/$tenant/$site/$application/user.csv</li>
<li>./user-files/conf/$tenant/$site/user.csv</li>
<li>./user-files/conf/$tenant/user.csv</li>
<li>./user-files/conf/user.csv</li>
</ul>


<h2 id="L6.3-saving-json-responses">6.3 Saving JSON Responses</h2>

<p>The knowledge to wether to save JSON response files is currently hard-coded</p>

<ul>
<li>The implementation of endpoint access is responsible to prepare a JSON file to be saved</li>
<li>For performance tests the JSON responses are not saved to the file system since we would use excessive disk space</li>
</ul>


<pre><code class="(null)">object PrestoAccounts {

  val RELATIVE_URL = &quot;netbanking/my/accounts&quot;

  val get = exec(http(RELATIVE_URL)
    .get(Configuration.getPrestoUrl(RELATIVE_URL))
    .header(&quot;Authorization&quot;, &quot;bearer ${token}&quot;)
    .check(
      status.is(200),
    .exec(session =&gt; {
      val jsonString = JsonModifierTool.remove(session, &quot;lastResponse&quot;, &quot;nextProlongation&quot;)
      JsonResponseTool.saveToFile(jsonString, RELATIVE_URL, session.get(&quot;user&quot;).as[String])
      session
    })
}</code></pre>


<p>The JSON response will be saved to <em>netbanking-my-accounts-9422753404.json</em></p>

<ul>
<li>We delete <em>nextProlongation</em> from the JSON response since its value can change between two test runs</li>
<li>Looking at the file name we know that this is a WebAPI API call hitting &ldquo;netbanking/my/accounts&rdquo; for the user (aka disposer id) <em>9422753404</em></li>
</ul>


<h2 id="L6.4-custom-ant-configuration">6.4 Custom Ant Configuration</h2>

<p>Here we use a neat little Ant trick - Ant properties are write once, i.e. you can never overwrite the value</p>

<ul>
<li>This feature is used to overwrite values in <em>build.properties</em> using a custom <em>user.properties</em></li>
<li>Please note that *user.properties" are ignored by Git so the file can never be comitted accidently</li>
</ul>


<pre><code class="(null)">#############################################################################
# Gatling testing coordinates
#############################################################################

application=george
tenant=at
site=fat
scope=functional

#############################################################################
# Misc
#############################################################################

# The executable being used when running &quot;ant diff:visual&quot;
visual.diff.executable=windiff.exe</code></pre>



<!-- ##END MARKED WRAPPER## -->
    </div>
</body>
</html>